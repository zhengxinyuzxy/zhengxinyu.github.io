<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ajax&amp;AxiosğŸ”¥ | mellowçš„åšå®¢</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="è¿™æ˜¯æè¿°">
    
    <link rel="preload" href="/zhengxinyu.github.io/assets/css/0.styles.f5bc7682.css" as="style"><link rel="preload" href="/zhengxinyu.github.io/assets/js/app.2705a983.js" as="script"><link rel="preload" href="/zhengxinyu.github.io/assets/js/3.149f0cc6.js" as="script"><link rel="preload" href="/zhengxinyu.github.io/assets/js/1.516e925f.js" as="script"><link rel="preload" href="/zhengxinyu.github.io/assets/js/12.e8e63685.js" as="script"><link rel="prefetch" href="/zhengxinyu.github.io/assets/js/10.48ae4bf7.js"><link rel="prefetch" href="/zhengxinyu.github.io/assets/js/11.84341829.js"><link rel="prefetch" href="/zhengxinyu.github.io/assets/js/4.49661c01.js"><link rel="prefetch" href="/zhengxinyu.github.io/assets/js/5.ad8ede08.js"><link rel="prefetch" href="/zhengxinyu.github.io/assets/js/6.edd0d1d8.js"><link rel="prefetch" href="/zhengxinyu.github.io/assets/js/7.ff404011.js"><link rel="prefetch" href="/zhengxinyu.github.io/assets/js/8.6aaa65af.js"><link rel="prefetch" href="/zhengxinyu.github.io/assets/js/9.864df959.js">
    <link rel="stylesheet" href="/zhengxinyu.github.io/assets/css/0.styles.f5bc7682.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>mellowçš„åšå®¢</h3> <p class="description" data-v-59e6cb88>è¿™æ˜¯æè¿°</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
        Â Â 
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zhengxinyu.github.io/" class="home-link router-link-active"><img src="/zhengxinyu.github.io/avatar.png" alt="mellowçš„åšå®¢" class="logo"> <span class="site-name">mellowçš„åšå®¢</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zhengxinyu.github.io/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åšå®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zhengxinyu.github.io/categories/java-web/" class="nav-link"><i class="undefined"></i>
  java-web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      xinyu zheng çš„åšå®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/uu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/xinyuzheng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/zhengxinyu.github.io/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/zhengxinyu.github.io/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>2</h3> <h6 data-v-1fad0c41>æ–‡ç« </h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>3</h3> <h6 data-v-1fad0c41>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/zhengxinyu.github.io/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åšå®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zhengxinyu.github.io/categories/java-web/" class="nav-link"><i class="undefined"></i>
  java-web
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      xinyu zheng çš„åšå®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/uu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/xinyuzheng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/zhengxinyu.github.io/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/zhengxinyu.github.io/" class="sidebar-heading clickable router-link-active"><span>æ¬¢è¿å­¦ä¹ </span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhengxinyu.github.io/" aria-current="page" class="sidebar-link">åšå®¢ç®€ä»‹</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/zhengxinyu.github.io/blogs/1" class="sidebar-heading clickable open"><span>åŸºç¡€ç¯‡</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/zhengxinyu.github.io/blogs/1.html" class="sidebar-link">ç¬¬ä¸€ç¯‡</a></li><li><a href="/zhengxinyu.github.io/blogs/2.html" aria-current="page" class="active sidebar-link">ç¬¬äºŒç¯‡</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Ajax&amp;AxiosğŸ”¥</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
        Â Â 
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Ajax&amp;AxiosğŸ”¥</h1> <div data-v-8a445198><!----> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/1/1</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>Ajax&amp;Axios</span><span class="tag-item" data-v-8a445198>æ‰‹å†™</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="day14-ajax-axios-ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ"><a href="#day14-ajax-axios-ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ" class="header-anchor">#</a> day14 Ajax&amp;Axios&amp;ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ</h1> <h2 id="ç¬¬ä¸€ç« -ajax"><a href="#ç¬¬ä¸€ç« -ajax" class="header-anchor">#</a> ç¬¬ä¸€ç«  Ajax</h2> <h3 id="_1-å­¦ä¹ ç›®æ ‡"><a href="#_1-å­¦ä¹ ç›®æ ‡" class="header-anchor">#</a> 1. å­¦ä¹ ç›®æ ‡</h3> <ul><li>äº†è§£æœåŠ¡å™¨æ¸²æŸ“å’ŒAjaxæ¸²æŸ“çš„åŒºåˆ«</li> <li>äº†è§£åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«</li></ul> <h3 id="_2-å†…å®¹è®²è§£"><a href="#_2-å†…å®¹è®²è§£" class="header-anchor">#</a> 2. å†…å®¹è®²è§£</h3> <h4 id="_2-1-æœåŠ¡å™¨ç«¯æ¸²æŸ“"><a href="#_2-1-æœåŠ¡å™¨ç«¯æ¸²æŸ“" class="header-anchor">#</a> 2.1 æœåŠ¡å™¨ç«¯æ¸²æŸ“</h4> <img src="F:\Java_02é˜¶æ®µ_web\æ•°æ®åº“day01_mysqlåŸºç¡€&amp;é¢„ä¹ èµ„æ–™\é¢„ä¹ èµ„æ–™\WEBday14_Ajax&amp;Axios&amp;ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ\ç¬”è®°\images\img001.png" alt="images" style="zoom:67%;"> <h4 id="_2-2-ajaxæ¸²æŸ“-å±€éƒ¨æ›´æ–°"><a href="#_2-2-ajaxæ¸²æŸ“-å±€éƒ¨æ›´æ–°" class="header-anchor">#</a> 2.2 Ajaxæ¸²æŸ“ï¼ˆå±€éƒ¨æ›´æ–°ï¼‰</h4> <img src="F:\Java_02é˜¶æ®µ_web\æ•°æ®åº“day01_mysqlåŸºç¡€&amp;é¢„ä¹ èµ„æ–™\é¢„ä¹ èµ„æ–™\WEBday14_Ajax&amp;Axios&amp;ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ\ç¬”è®°\images\img002.png" alt="images" style="zoom:67%;"> <h4 id="_2-3-å‰åç«¯åˆ†ç¦»"><a href="#_2-3-å‰åç«¯åˆ†ç¦»" class="header-anchor">#</a> 2.3 å‰åç«¯åˆ†ç¦»</h4> <p>çœŸæ­£çš„å‰åç«¯åˆ†ç¦»æ˜¯å‰ç«¯é¡¹ç›®å’Œåç«¯é¡¹ç›®åˆ†æœåŠ¡å™¨éƒ¨ç½²ï¼Œåœ¨æˆ‘ä»¬è¿™é‡Œæˆ‘ä»¬å…ˆç†è§£ä¸ºå½»åº•èˆå¼ƒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œæ•°æ®å…¨éƒ¨é€šè¿‡Ajaxæ–¹å¼ä»¥JSONæ ¼å¼æ¥ä¼ é€’</p> <h4 id="_2-4-åŒæ­¥ä¸å¼‚æ­¥"><a href="#_2-4-åŒæ­¥ä¸å¼‚æ­¥" class="header-anchor">#</a> 2.4 åŒæ­¥ä¸å¼‚æ­¥</h4> <p>Ajaxæœ¬èº«å°±æ˜¯Asynchronous JavaScript And XMLçš„ç¼©å†™ï¼Œç›´è¯‘ä¸ºï¼šå¼‚æ­¥çš„JavaScriptå’ŒXMLã€‚åœ¨å®é™…åº”ç”¨ä¸­AjaxæŒ‡çš„æ˜¯ï¼š<span style="color:blue;font-weight:bold;">ä¸åˆ·æ–°æµè§ˆå™¨çª—å£</span>ï¼Œ<span style="color:blue;font-weight:bold;">ä¸åšé¡µé¢è·³è½¬</span>ï¼Œ<span style="color:blue;font-weight:bold;">å±€éƒ¨æ›´æ–°é¡µé¢å†…å®¹</span>çš„æŠ€æœ¯ã€‚</p> <p><span style="color:blue;font-weight:bold;">ã€åŒæ­¥ã€</span>å’Œ<span style="color:blue;font-weight:bold;">ã€å¼‚æ­¥ã€</span>æ˜¯ä¸€å¯¹ç›¸å¯¹çš„æ¦‚å¿µï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯åŒæ­¥ï¼Œä»€ä¹ˆæ˜¯å¼‚æ­¥å‘¢ï¼Ÿ</p> <h5 id="_2-4-1-åŒæ­¥"><a href="#_2-4-1-åŒæ­¥" class="header-anchor">#</a> 2.4.1 åŒæ­¥</h5> <p>å¤šä¸ªæ“ä½œ<span style="color:blue;font-weight:bold;">æŒ‰é¡ºåºæ‰§è¡Œ</span>ï¼Œå‰é¢çš„æ“ä½œæ²¡æœ‰å®Œæˆï¼Œåé¢çš„æ“ä½œå°±å¿…é¡»<span style="color:blue;font-weight:bold;">ç­‰å¾…</span>ã€‚æ‰€ä»¥åŒæ­¥æ“ä½œé€šå¸¸æ˜¯<span style="color:blue;font-weight:bold;">ä¸²è¡Œ</span>çš„ã€‚</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg003.png" alt="images"></p> <h5 id="_2-4-2-å¼‚æ­¥"><a href="#_2-4-2-å¼‚æ­¥" class="header-anchor">#</a> 2.4.2 å¼‚æ­¥</h5> <p>å¤šä¸ªæ“ä½œç›¸ç»§å¼€å§‹<span style="color:blue;font-weight:bold;">å¹¶å‘æ‰§è¡Œ</span>ï¼Œå³ä½¿å¼€å§‹çš„å…ˆåé¡ºåºä¸åŒï¼Œä½†æ˜¯ç”±äºå®ƒä»¬å„è‡ªæ˜¯<span style="color:blue;font-weight:bold;">åœ¨è‡ªå·±ç‹¬ç«‹çš„è¿›ç¨‹æˆ–çº¿ç¨‹ä¸­</span>å®Œæˆï¼Œæ‰€ä»¥<span style="color:blue;font-weight:bold;">äº’ä¸å¹²æ‰°</span>ï¼Œ<span style="color:blue;font-weight:bold;">è°ä¹Ÿ<span style="color:red;font-weight:bold;">ä¸ç”¨ç­‰</span>è°</span>ã€‚</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg004.png" alt="images"></p> <h2 id="ç¬¬äºŒç« -axios"><a href="#ç¬¬äºŒç« -axios" class="header-anchor">#</a> ç¬¬äºŒç«  Axios</h2> <h3 id="_1-å­¦ä¹ ç›®æ ‡-2"><a href="#_1-å­¦ä¹ ç›®æ ‡-2" class="header-anchor">#</a> 1. å­¦ä¹ ç›®æ ‡</h3> <ul><li>äº†è§£Axios</li> <li>æŒæ¡Axioså‘é€å¼‚æ­¥è¯·æ±‚</li> <li>æŒæ¡Axiosæºå¸¦jsonç±»å‹çš„è¯·æ±‚å‚æ•°</li> <li>æŒæ¡æœåŠ¡å™¨ç«¯è¿”å›jsonæ•°æ®</li></ul> <h3 id="_2-å†…å®¹è®²è§£-2"><a href="#_2-å†…å®¹è®²è§£-2" class="header-anchor">#</a> 2. å†…å®¹è®²è§£</h3> <h4 id="_2-1-axiosç®€ä»‹"><a href="#_2-1-axiosç®€ä»‹" class="header-anchor">#</a> 2.1 Axiosç®€ä»‹</h4> <p>ä½¿ç”¨åŸç”Ÿçš„JavaScriptç¨‹åºæ‰§è¡ŒAjaxæå…¶ç¹çï¼Œæ‰€ä»¥ä¸€å®šè¦ä½¿ç”¨æ¡†æ¶æ¥å®Œæˆã€‚è€ŒAxioså°±æ˜¯ç›®å‰æœ€æµè¡Œçš„å‰ç«¯Ajaxæ¡†æ¶ã€‚</p> <p>Axioså®˜ç½‘ï¼šhttp://www.axios-js.com/</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg005.png" alt="images"></p> <p>ä½¿ç”¨Axioså’Œä½¿ç”¨Vueä¸€æ ·ï¼Œå¯¼å…¥å¯¹åº”çš„*.jsæ–‡ä»¶å³å¯ã€‚å®˜æ–¹æä¾›çš„scriptæ ‡ç­¾å¼•å…¥æ–¹å¼ä¸ºï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªaxios.min.jsæ–‡ä»¶ä¸‹è½½ä¸‹æ¥ä¿å­˜åˆ°æœ¬åœ°æ¥ä½¿ç”¨ã€‚</p> <h4 id="_2-2-axiosåŸºæœ¬ç”¨æ³•"><a href="#_2-2-axiosåŸºæœ¬ç”¨æ³•" class="header-anchor">#</a> 2.2 AxiosåŸºæœ¬ç”¨æ³•</h4> <h5 id="_2-2-1-åœ¨å‰ç«¯é¡µé¢å¼•å…¥å¼€å‘ç¯å¢ƒ"><a href="#_2-2-1-åœ¨å‰ç«¯é¡µé¢å¼•å…¥å¼€å‘ç¯å¢ƒ" class="header-anchor">#</a> 2.2.1 åœ¨å‰ç«¯é¡µé¢å¼•å…¥å¼€å‘ç¯å¢ƒ</h5> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/demo/static/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/demo/static/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="_2-2-2-å‘é€æ™®é€šè¯·æ±‚å‚æ•°"><a href="#_2-2-2-å‘é€æ™®é€šè¯·æ±‚å‚æ•°" class="header-anchor">#</a> 2.2.2 å‘é€æ™®é€šè¯·æ±‚å‚æ•°</h5> <h6 id="_2-2-2-1-å‰ç«¯ä»£ç "><a href="#_2-2-2-1-å‰ç«¯ä»£ç " class="header-anchor">#</a> 2.2.2.1 å‰ç«¯ä»£ç </h6> <p>HTMLæ ‡ç­¾ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;commonParam&quot;</span><span class="token operator">&gt;</span>æ™®é€šè¯·æ±‚å‚æ•°<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p>Vue+axiosä»£ç ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;commonParam&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;/demo/AjaxServlet?method=commonParam&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;userName&quot;</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;userPwd&quot;</span><span class="token operator">:</span><span class="token string">&quot;123456&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ•ˆæœï¼šæ‰€æœ‰è¯·æ±‚å‚æ•°éƒ½è¢«æ”¾åˆ°URLåœ°å€åé¢äº†ï¼Œå“ªæ€•æˆ‘ä»¬ç°åœ¨ç”¨çš„æ˜¯POSTè¯·æ±‚æ–¹å¼ã€‚</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg007.png" alt="images"></p> <h6 id="_2-2-2-2-åç«¯ä»£ç "><a href="#_2-2-2-2-åç«¯ä»£ç " class="header-anchor">#</a> 2.2.2.2 åç«¯ä»£ç </h6> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AjaxServlet</span> <span class="token keyword">extends</span> <span class="token class-name">ModelBaseServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">commonParam</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> userName <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userPwd <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;userPwd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;userName = &quot;</span> <span class="token operator">+</span> userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;userPwd = &quot;</span> <span class="token operator">+</span> userPwd<span class="token punctuation">)</span><span class="token punctuation">;</span>

        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨ç«¯è¿”å›æ™®é€šæ–‡æœ¬å­—ç¬¦ä¸²ä½œä¸ºå“åº”&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>P.S.ï¼šç”±äºæˆ‘ä»¬ä¸éœ€è¦Thymeleafäº†ï¼Œæ‰€ä»¥ModelBaseServletå¯ä»¥è·³è¿‡ViewBaseServletç›´æ¥ç»§æ‰¿HttpServletã€‚</p></blockquote> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg006.png" alt="images"></p> <h6 id="_2-2-3-axiosç¨‹åºæ¥æ”¶åˆ°çš„å“åº”å¯¹è±¡ç»“æ„"><a href="#_2-2-3-axiosç¨‹åºæ¥æ”¶åˆ°çš„å“åº”å¯¹è±¡ç»“æ„" class="header-anchor">#</a> 2.2.3 axiosç¨‹åºæ¥æ”¶åˆ°çš„å“åº”å¯¹è±¡ç»“æ„</h6> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg011.png" alt="images"></p> <table><thead><tr><th>å±æ€§å</th> <th>ä½œç”¨</th></tr></thead> <tbody><tr><td>config</td> <td>è°ƒç”¨axios(configå¯¹è±¡)æ–¹æ³•æ—¶ä¼ å…¥çš„JSONå¯¹è±¡</td></tr> <tr><td>data</td> <td>æœåŠ¡å™¨ç«¯è¿”å›çš„å“åº”ä½“æ•°æ®</td></tr> <tr><td>headers</td> <td>å“åº”æ¶ˆæ¯å¤´</td></tr> <tr><td>request</td> <td>åŸç”ŸJavaScriptæ‰§è¡ŒAjaxæ“ä½œæ—¶ä½¿ç”¨çš„XMLHttpRequest</td></tr> <tr><td>status</td> <td>å“åº”çŠ¶æ€ç </td></tr> <tr><td>statusText</td> <td>å“åº”çŠ¶æ€ç çš„è¯´æ˜æ–‡æœ¬</td></tr></tbody></table> <h6 id="_2-2-4-æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥å"><a href="#_2-2-4-æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥å" class="header-anchor">#</a> 2.2.4 æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥å</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">// catch()æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å‡ºé”™åï¼Œä¼šè°ƒç”¨</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// errorå°±æ˜¯å‡ºé”™æ—¶æœåŠ¡å™¨ç«¯è¿”å›çš„å“åº”æ•°æ®</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åœ¨æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥åï¼Œè·å–axioså°è£…çš„JSONæ ¼å¼çš„å“åº”æ•°æ®å¯¹è±¡</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥åï¼Œè·å–å“åº”çŠ¶æ€ç </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åœ¨æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥åï¼Œè·å–å“åº”çŠ¶æ€è¯´æ˜æ–‡æœ¬</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// åœ¨æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥åï¼Œè·å–å“åº”ä½“æ•°æ®</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨ç»™catch()å‡½æ•°ä¼ å…¥çš„å›è°ƒå‡½æ•°ä¸­ï¼Œerrorå¯¹è±¡å°è£…äº†æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥åç›¸åº”çš„é”™è¯¯ä¿¡æ¯ã€‚å…¶ä¸­ï¼Œaxioså°è£…çš„å“åº”æ•°æ®å¯¹è±¡ï¼Œæ˜¯errorå¯¹è±¡çš„responseå±æ€§ã€‚responseå±æ€§å¯¹è±¡çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg012.png" alt="images"></p> <p>å¯ä»¥çœ‹åˆ°ï¼Œresponseå¯¹è±¡çš„ç»“æ„è¿˜æ˜¯å’Œthen()å‡½æ•°ä¼ å…¥çš„å›è°ƒå‡½æ•°ä¸­çš„responseæ˜¯ä¸€æ ·çš„ï¼š</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg013.png" alt="images"></p> <blockquote><p>å›è°ƒå‡½æ•°ï¼šå¼€å‘äººå‘˜å£°æ˜ï¼Œä½†æ˜¯è°ƒç”¨æ—¶äº¤ç»™ç³»ç»Ÿæ¥è°ƒç”¨ã€‚åƒå•å‡»å“åº”å‡½æ•°ã€then()ã€catch()é‡Œé¢ä¼ å…¥çš„éƒ½æ˜¯å›è°ƒå‡½æ•°ã€‚å›è°ƒå‡½æ•°æ˜¯ç›¸å¯¹äºæ™®é€šå‡½æ•°æ¥è¯´çš„ï¼Œæ™®é€šå‡½æ•°å°±æ˜¯å¼€å‘äººå‘˜è‡ªå·±å£°æ˜ï¼Œè‡ªå·±è°ƒç”¨ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result=&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <h4 id="_2-3-å‘é€è¯·æ±‚ä½“json"><a href="#_2-3-å‘é€è¯·æ±‚ä½“json" class="header-anchor">#</a> 2.3 å‘é€è¯·æ±‚ä½“JSON</h4> <h5 id="_2-3-1-å‰ç«¯ä»£ç "><a href="#_2-3-1-å‰ç«¯ä»£ç " class="header-anchor">#</a> 2.3.1 å‰ç«¯ä»£ç </h5> <p>HTMLä»£ç ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>requestBodyJSON<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è¯·æ±‚ä½“JSON<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Vue+axiosä»£ç ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>â€¦â€¦
<span class="token string-property property">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;requestBodyJSON&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;/demo/AjaxServlet?method=requestBodyJSON&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;stuId&quot;</span><span class="token operator">:</span> <span class="token number">55</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;stuName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;subjectList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;subjectName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&quot;subjectScore&quot;</span><span class="token operator">:</span> <span class="token number">50.55</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;subjectName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php&quot;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&quot;subjectScore&quot;</span><span class="token operator">:</span> <span class="token number">30.26</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;teacherMap&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;one&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;teacherName&quot;</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&quot;tearcherAge&quot;</span><span class="token operator">:</span><span class="token number">23</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;two&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;teacherName&quot;</span><span class="token operator">:</span><span class="token string">&quot;jerry&quot;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&quot;tearcherAge&quot;</span><span class="token operator">:</span><span class="token number">31</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;school&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;schoolId&quot;</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;schoolName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;atguigu&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
â€¦â€¦
</code></pre></div><p>æ•ˆæœï¼š</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg008.png" alt="images"></p> <blockquote><p>P.S.ï¼šChromeæµè§ˆå™¨ä¸­å°†ã€è¯·æ±‚è´Ÿè½½ã€æ˜¾ç¤ºä¸ºè‹±æ–‡ï¼šã€Request Payloadã€ã€‚</p></blockquote> <h5 id="_2-3-2-åç«¯ä»£ç "><a href="#_2-3-2-åç«¯ä»£ç " class="header-anchor">#</a> 2.3.2 åç«¯ä»£ç </h5> <h6 id="_2-3-2-1-åŠ å…¥gsonåŒ…"><a href="#_2-3-2-1-åŠ å…¥gsonåŒ…" class="header-anchor">#</a> 2.3.2.1 åŠ å…¥GsonåŒ…</h6> <p>Gsonæ˜¯Googleç ”å‘çš„ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„<span style="color:blue;font-weight:bold;">JSONæ•°æ®è§£æå’Œç”Ÿæˆå·¥å…·</span>ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å°†æ•°æ®åœ¨JSONå­—ç¬¦ä¸²å’ŒJavaå¯¹è±¡ä¹‹é—´äº’ç›¸è½¬æ¢ã€‚</p> <p><img src="D:/%E8%AE%B2%E8%AF%BE%E8%B5%84%E6%96%99/%E5%B0%9A%E7%A1%85%E8%B0%B7/JavaWeb%E8%AF%BE%E7%A8%8B%E5%8D%87%E7%BA%A7%E8%AF%95%E8%AE%B2%E8%B5%84%E6%96%99/%E7%AC%94%E8%AE%B0/code_heavy_industry/pro001-javaweb/lecture/chapter12/images/img009.png" alt="images"></p> <h6 id="_2-3-2-2-servletä»£ç "><a href="#_2-3-2-2-servletä»£ç " class="header-anchor">#</a> 2.3.2.2 Servletä»£ç </h6> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">requestBodyJSON</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.ç”±äºè¯·æ±‚ä½“æ•°æ®æœ‰å¯èƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥Servletæ ‡å‡†åœ¨è®¾è®¡APIçš„æ—¶å€™è¦æ±‚æˆ‘ä»¬é€šè¿‡è¾“å…¥æµæ¥è¯»å–</span>
    <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.åˆ›å»ºStringBuilderå¯¹è±¡æ¥ç´¯åŠ å­˜å‚¨ä»è¯·æ±‚ä½“ä¸­è¯»å–åˆ°çš„æ¯ä¸€è¡Œ</span>
    <span class="token class-name">StringBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.å£°æ˜ä¸´æ—¶å˜é‡</span>
    <span class="token class-name">String</span> bufferStr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token comment">// 4.å¾ªç¯è¯»å–</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bufferStr <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>bufferStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 5.å…³é—­æµ</span>
    reader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 6.ç´¯åŠ çš„ç»“æœå°±æ˜¯æ•´ä¸ªè¯·æ±‚ä½“</span>
    <span class="token class-name">String</span> requestBody <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 7.åˆ›å»ºGsonå¯¹è±¡ç”¨äºè§£æJSONå­—ç¬¦ä¸²</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 8.å°†JSONå­—ç¬¦ä¸²è¿˜åŸä¸ºJavaå¯¹è±¡</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>requestBody<span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;student = &quot;</span> <span class="token operator">+</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;requestBody = &quot;</span> <span class="token operator">+</span> requestBody<span class="token punctuation">)</span><span class="token punctuation">;</span>

    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;æœåŠ¡å™¨ç«¯è¿”å›æ™®é€šæ–‡æœ¬å­—ç¬¦ä¸²ä½œä¸ºå“åº”&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>P.S.ï¼šçœ‹ç€å¾ˆéº»çƒ¦æ˜¯å§ï¼Ÿåˆ«æ‹…å¿ƒï¼Œå°†æ¥æˆ‘ä»¬æœ‰äº†<span style="color:blue;font-weight:bold;">SpringMVC</span>ä¹‹åï¼Œä¸€ä¸ª<span style="color:blue;font-weight:bold;">@RequestBody</span>æ³¨è§£å°±èƒ½å¤Ÿæå®šï¼Œéå¸¸æ–¹ä¾¿ï¼</p></blockquote> <h4 id="_2-4-æœåŠ¡å™¨ç«¯è¿”å›jsonæ•°æ®"><a href="#_2-4-æœåŠ¡å™¨ç«¯è¿”å›jsonæ•°æ®" class="header-anchor">#</a> 2.4 æœåŠ¡å™¨ç«¯è¿”å›JSONæ•°æ®</h4> <h5 id="_2-4-1-å‰ç«¯ä»£ç "><a href="#_2-4-1-å‰ç«¯ä»£ç " class="header-anchor">#</a> 2.4.1 å‰ç«¯ä»£ç </h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;/demo/AjaxServlet?method=responseBodyJSON&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>then()ä¸­è·å–åˆ°çš„responseåœ¨æ§åˆ¶å°æ‰“å°æ•ˆæœå¦‚ä¸‹ï¼šæˆ‘ä»¬éœ€è¦é€šè¿‡dataå±æ€§è·å–å“åº”ä½“æ•°æ®</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg010.png" alt="images"></p> <h5 id="_2-4-2-åç«¯ä»£ç "><a href="#_2-4-2-åç«¯ä»£ç " class="header-anchor">#</a> 2.4.2 åç«¯ä»£ç </h5> <h6 id="_2-4-2-1-åŠ å…¥gsonåŒ…"><a href="#_2-4-2-1-åŠ å…¥gsonåŒ…" class="header-anchor">#</a> 2.4.2.1 åŠ å…¥GsonåŒ…</h6> <p>ä»ç„¶éœ€è¦Gsonæ”¯æŒï¼Œä¸ç”¨å¤šè¯´</p> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg009.png" alt="images"></p> <h6 id="_2-4-2-2-servletä»£ç "><a href="#_2-4-2-2-servletä»£ç " class="header-anchor">#</a> 2.4.2.2 Servletä»£ç </h6> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">responseBodyJSON</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.å‡†å¤‡æ•°æ®å¯¹è±¡</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setStuId</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setStuName</span><span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setSchool</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">School</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">&quot;atguigu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setSubjectList</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token number">95.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token string">&quot;php&quot;</span><span class="token punctuation">,</span> <span class="token number">93.3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Teacher</span><span class="token punctuation">&gt;</span></span> teacherMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    teacherMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;lili&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    teacherMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;t2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;mary&quot;</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    teacherMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;t3&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;katty&quot;</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    student<span class="token punctuation">.</span><span class="token function">setTeacherMap</span><span class="token punctuation">(</span>teacherMap<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.åˆ›å»ºGsonå¯¹è±¡</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.å°†Javaå¯¹è±¡è½¬æ¢ä¸ºJSONå¯¹è±¡</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4.è®¾ç½®å“åº”ä½“çš„å†…å®¹ç±»å‹</span>
    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="ç¬¬ä¸‰ç« -ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ"><a href="#ç¬¬ä¸‰ç« -ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ" class="header-anchor">#</a> ç¬¬ä¸‰ç«  ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ</h2> <h3 id="åŠŸèƒ½ä¸€-æ³¨å†Œé¡µé¢ç”¨æˆ·åå”¯ä¸€æ€§æ£€æŸ¥ä¼˜åŒ–"><a href="#åŠŸèƒ½ä¸€-æ³¨å†Œé¡µé¢ç”¨æˆ·åå”¯ä¸€æ€§æ£€æŸ¥ä¼˜åŒ–" class="header-anchor">#</a> åŠŸèƒ½ä¸€ æ³¨å†Œé¡µé¢ç”¨æˆ·åå”¯ä¸€æ€§æ£€æŸ¥ä¼˜åŒ–</h3> <h4 id="_1-å‡†å¤‡å·¥ä½œ"><a href="#_1-å‡†å¤‡å·¥ä½œ" class="header-anchor">#</a> 1. å‡†å¤‡å·¥ä½œ</h4> <ul><li>åˆ›å»ºmodule</li> <li>è¿ç§»ä»£ç </li></ul> <h4 id="_2-åŠ å…¥ajaxå¼€å‘ç¯å¢ƒ"><a href="#_2-åŠ å…¥ajaxå¼€å‘ç¯å¢ƒ" class="header-anchor">#</a> 2. åŠ å…¥Ajaxå¼€å‘ç¯å¢ƒ</h4> <h5 id="_2-1-å‰ç«¯æ‰€éœ€axiosåº“"><a href="#_2-1-å‰ç«¯æ‰€éœ€axiosåº“" class="header-anchor">#</a> 2.1 å‰ç«¯æ‰€éœ€axiosåº“</h5> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg014.png" alt="images"></p> <h5 id="_2-2-åç«¯æ‰€éœ€gsonåº“"><a href="#_2-2-åç«¯æ‰€éœ€gsonåº“" class="header-anchor">#</a> 2.2 åç«¯æ‰€éœ€Gsonåº“</h5> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg015.png" alt="images"></p> <h4 id="_3-å°è£…ajaxcommonsresult"><a href="#_3-å°è£…ajaxcommonsresult" class="header-anchor">#</a> 3. å°è£…AjaxCommonsResult</h4> <h5 id="_3-1-æ¨¡å‹çš„ä½œç”¨"><a href="#_3-1-æ¨¡å‹çš„ä½œç”¨" class="header-anchor">#</a> 3.1 æ¨¡å‹çš„ä½œç”¨</h5> <p>åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œå‡¡æ˜¯æ¶‰åŠåˆ°ç»™Ajaxè¯·æ±‚è¿”å›å“åº”ï¼Œæˆ‘ä»¬éƒ½å°è£…åˆ°AjaxCommonsResultç±»å‹ä¸­ã€‚</p> <h5 id="_3-2-æ¨¡å‹çš„ä»£ç "><a href="#_3-2-æ¨¡å‹çš„ä»£ç " class="header-anchor">#</a> 3.2 æ¨¡å‹çš„ä»£ç </h5> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">SUCCESS</span> <span class="token operator">=</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">FAILED</span> <span class="token operator">=</span> <span class="token string">&quot;FAILED&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> result<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">T</span> data<span class="token punctuation">;</span>
</code></pre></div><p>å„ä¸ªå±æ€§çš„å«ä¹‰ï¼š</p> <table><thead><tr><th>å±æ€§å</th> <th>å«ä¹‰</th></tr></thead> <tbody><tr><td>SUCCESS</td> <td>ä»£è¡¨æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚æˆåŠŸ</td></tr> <tr><td>FAILED</td> <td>ä»£è¡¨æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚å¤±è´¥</td></tr> <tr><td>result</td> <td>æœåŠ¡å™¨ç«¯å¤„ç†è¯·æ±‚çš„ç»“æœï¼Œå–å€¼åœ¨SUCCESSå’ŒFAILEDäºŒè€…ä¸­é€‰æ‹©ä¸€ä¸ª</td></tr> <tr><td>message</td> <td>å¤±è´¥æ¶ˆæ¯</td></tr> <tr><td>data</td> <td>é’ˆå¯¹æŸ¥è¯¢æ“ä½œè¿”å›çš„æ•°æ®</td></tr></tbody></table> <h5 id="_3-3-æ¨¡å‹çš„å¥½å¤„"><a href="#_3-3-æ¨¡å‹çš„å¥½å¤„" class="header-anchor">#</a> 3.3 æ¨¡å‹çš„å¥½å¤„</h5> <ul><li>ä½œä¸ºæ•´ä¸ªå›¢é˜Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå‰åç«¯äº¤äº’æ—¶ä½¿ç”¨çš„ç»Ÿä¸€çš„æ•°æ®æ ¼å¼</li> <li>æœ‰åˆ©äºå›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„ååŠ©ï¼Œæé«˜å¼€å‘æ•ˆç‡</li></ul> <h4 id="_4-åŠŸèƒ½å®ç°"><a href="#_4-åŠŸèƒ½å®ç°" class="header-anchor">#</a> 4. åŠŸèƒ½å®ç°</h4> <h5 id="_4-1-å®šä½åŠŸèƒ½çš„ä½ç½®"><a href="#_4-1-å®šä½åŠŸèƒ½çš„ä½ç½®" class="header-anchor">#</a> 4.1 å®šä½åŠŸèƒ½çš„ä½ç½®</h5> <p>åœ¨ç”¨æˆ·è¾“å…¥ç”¨æˆ·åä¹‹åï¼Œç«‹å³æ£€æŸ¥è¿™ä¸ªç”¨æˆ·åæ˜¯å¦å¯ç”¨ã€‚</p> <h5 id="_4-2-æ€è·¯"><a href="#_4-2-æ€è·¯" class="header-anchor">#</a> 4.2 æ€è·¯</h5> <h6 id="_4-2-1-ç»™ç”¨æˆ·åè¾“å…¥æ¡†ç»‘å®šçš„äº‹ä»¶ç±»å‹"><a href="#_4-2-1-ç»™ç”¨æˆ·åè¾“å…¥æ¡†ç»‘å®šçš„äº‹ä»¶ç±»å‹" class="header-anchor">#</a> 4.2.1 ç»™ç”¨æˆ·åè¾“å…¥æ¡†ç»‘å®šçš„äº‹ä»¶ç±»å‹</h6> <p>ç»“è®ºï¼šä¸èƒ½åœ¨é’ˆå¯¹usernameè®¾å®šçš„watchä¸­å‘é€Ajaxè¯·æ±‚ã€‚</p> <p>åŸå› ï¼šæœåŠ¡å™¨ç«¯å“åº”çš„é€Ÿåº¦è·Ÿä¸ä¸Šç”¨æˆ·è¾“å…¥çš„é€Ÿåº¦ï¼Œè€Œä¸”æœåŠ¡å™¨ç«¯å¼‚æ­¥è¿”å›å“åº”æ•°æ®ï¼Œæ— æ³•ä¿è¯å’Œç”¨æˆ·è¾“å…¥çš„é¡ºåºå®Œå…¨ä¸€è‡´ã€‚æ­¤æ—¶æœ‰ä¸‹é¢å‡ ç‚¹é—®é¢˜ï¼š</p> <ul><li>ç»™æœåŠ¡å™¨å¢åŠ ä¸å¿…è¦çš„å‹åŠ›</li> <li>ç”¨æˆ·è¾“å…¥çš„æ•°æ®åœ¨è¾“å…¥è¿‡ç¨‹ä¸­æ˜¯ä¸æ–­å‘ç”Ÿå˜åŒ–çš„</li> <li>å“åº”æ•°æ®å’Œè¾“å…¥é¡ºåºä¸å¯¹åº”ï¼Œä¼šå‘ç”Ÿé”™ä¹±</li></ul> <p>è§£å†³åŠæ³•ï¼šç»‘å®šçš„äº‹ä»¶ç±»å‹ä½¿ç”¨ã€å€¼æ”¹å˜ã€äº‹ä»¶ã€‚</p> <h6 id="_4-2-2-æµç¨‹å›¾"><a href="#_4-2-2-æµç¨‹å›¾" class="header-anchor">#</a> 4.2.2 æµç¨‹å›¾</h6> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg017.png" alt="images"></p> <h5 id="_4-3-ä»£ç å®ç°"><a href="#_4-3-ä»£ç å®ç°" class="header-anchor">#</a> 4.3 ä»£ç å®ç°</h5> <h6 id="_4-3-1-åœ¨å½“å‰é¡µé¢å¼•å…¥axiosåº“æ–‡ä»¶"><a href="#_4-3-1-åœ¨å½“å‰é¡µé¢å¼•å…¥axiosåº“æ–‡ä»¶" class="header-anchor">#</a> 4.3.1 åœ¨å½“å‰é¡µé¢å¼•å…¥axiosåº“æ–‡ä»¶</h6> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/script/axios.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h6 id="_4-3-2-ç»™ç”¨æˆ·åè¾“å…¥æ¡†ç»‘å®šå€¼æ”¹å˜äº‹ä»¶"><a href="#_4-3-2-ç»™ç”¨æˆ·åè¾“å…¥æ¡†ç»‘å®šå€¼æ”¹å˜äº‹ä»¶" class="header-anchor">#</a> 4.3.2 ç»™ç”¨æˆ·åè¾“å…¥æ¡†ç»‘å®šå€¼æ”¹å˜äº‹ä»¶</h6> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name"><span class="token namespace">v-model:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>usernameUniqueCheck<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>è¯·è¾“å…¥ç”¨æˆ·å<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h6 id="_4-3-3-javascriptä»£ç "><a href="#_4-3-3-javascriptä»£ç " class="header-anchor">#</a> 4.3.3 JavaScriptä»£ç </h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> registerApp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#registerForm&quot;</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
		<span class="token string-property property">&quot;username&quot;</span><span class="token operator">:</span><span class="token string">&quot;[[${param.username}]]&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;password&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;passwordConfirm&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;[[${param.email}]]&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;code&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;usernameCheckMessage&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;watch&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>â€¦â€¦<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
		â€¦â€¦<span class="token punctuation">,</span>
		â€¦â€¦<span class="token punctuation">,</span>
		<span class="token string-property property">&quot;usernameUniqueCheck&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token comment">// è·å–ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„æ•°æ®</span>
			<span class="token keyword">var</span> username <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">;</span>

			<span class="token comment">// å‘é€Ajaxè¯·æ±‚æ‰§è¡Œæ£€æŸ¥</span>
			<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
				<span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;UserServlet&quot;</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
					<span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;checkUsernameUnique&quot;</span><span class="token punctuation">,</span>
					<span class="token string-property property">&quot;username&quot;</span><span class="token operator">:</span>username
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token comment">// 1.ä»å“åº”æ•°æ®ä¸­è·å–è¯·æ±‚å¤„ç†ç»“æœ</span>
				<span class="token keyword">var</span> result <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>

				<span class="token comment">// 2.åˆ¤æ–­resultçš„å€¼</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token comment">// 3.ç”¨æˆ·åå¯ç”¨</span>
					<span class="token comment">// æ³¨æ„ï¼šç°åœ¨æˆ‘ä»¬åœ¨then()çš„å›è°ƒå‡½æ•°ä¸­ï¼Œthiså·²ç»ä¸å†æŒ‡å‘Vueå¯¹è±¡äº†</span>
					<span class="token comment">// æ‰€ä»¥ï¼Œæˆ‘ä»¬é€šè¿‡Vueå¯¹è±¡çš„å˜é‡åæ¥è®¿é—®Vueå¯¹è±¡</span>
					registerApp<span class="token punctuation">.</span>usernameCheckMessage <span class="token operator">=</span> <span class="token string">&quot;ç”¨æˆ·åå¯ç”¨&quot;</span><span class="token punctuation">;</span>

				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

					<span class="token comment">// 4.ç”¨æˆ·åä¸å¯ç”¨</span>
					registerApp<span class="token punctuation">.</span>usernameCheckMessage <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">;</span>

				<span class="token punctuation">}</span>

			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="_4-3-4-userservlet"><a href="#_4-3-4-userservlet" class="header-anchor">#</a> 4.3.4 UserServlet</h6> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">checkUsernameUnique</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ajaxResult <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token comment">// 1.ä»è¯·æ±‚å‚æ•°ä¸­è·å–ç”¨æˆ·å</span>
    <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 2.è°ƒç”¨Serviceæ–¹æ³•æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦è¢«å ç”¨</span>
        userService<span class="token punctuation">.</span><span class="token function">checkUsernameUnique</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.æŒ‰ç…§æ£€æµ‹æˆåŠŸçš„ç»“æœåˆ›å»ºAjaxCommonResultå¯¹è±¡</span>
        ajaxResult <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">AjaxCommonResult</span><span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4.æŒ‰ç…§æ£€æµ‹å¤±è´¥çš„ç»“æœåˆ›å»ºAjaxCommonResultå¯¹è±¡</span>
        ajaxResult <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">AjaxCommonResult</span><span class="token punctuation">.</span><span class="token constant">FAILED</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 5.æ ¹æ®ajaxResultå¯¹è±¡è¿”å›å“åº”æ•°æ®</span>
    <span class="token comment">// â‘ åˆ›å»ºGsonå¯¹è±¡</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// â‘¡æ‰§è¡ŒJSONæ•°æ®è½¬æ¢</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>ajaxResult<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// â‘¢è®¾ç½®å“åº”ä½“å†…å®¹ç±»å‹</span>
    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h6 id="_4-3-5-userservice"><a href="#_4-3-5-userservice" class="header-anchor">#</a> 4.3.5 UserService</h6> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">checkUsernameUnique</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token class-name">User</span> user <span class="token operator">=</span> userDao<span class="token punctuation">.</span><span class="token function">selectUserByName</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·åå·²ç»è¢«å ç”¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="åŠŸèƒ½äºŒ-åŠ å…¥è´­ç‰©è½¦"><a href="#åŠŸèƒ½äºŒ-åŠ å…¥è´­ç‰©è½¦" class="header-anchor">#</a> åŠŸèƒ½äºŒ åŠ å…¥è´­ç‰©è½¦</h3> <h4 id="_1ã€æ€è·¯"><a href="#_1ã€æ€è·¯" class="header-anchor">#</a> 1ã€æ€è·¯</h4> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg018.png" alt="images"></p> <h4 id="_2-ä»£ç å®ç°"><a href="#_2-ä»£ç å®ç°" class="header-anchor">#</a> 2. ä»£ç å®ç°</h4> <h5 id="_2-1-åŠ å…¥layerå¼¹å±‚ç»„ä»¶"><a href="#_2-1-åŠ å…¥layerå¼¹å±‚ç»„ä»¶" class="header-anchor">#</a> 2.1 åŠ å…¥layerå¼¹å±‚ç»„ä»¶</h5> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg019.png" alt="images"></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/script/jquery-1.7.2.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/layer/layer.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="_2-2-é¡¶å±‚barç»‘å®švueå¯¹è±¡"><a href="#_2-2-é¡¶å±‚barç»‘å®švueå¯¹è±¡" class="header-anchor">#</a> 2.2 é¡¶å±‚barç»‘å®šVueå¯¹è±¡</h5> <p>Thymeleafåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„è¿‡ç¨‹ä¸­å°†è´­ç‰©è½¦æ€»æ•°é‡è®¡ç®—å¾—åˆ°ï¼Œé€šè¿‡è¡¨è¾¾å¼è®¾ç½®å†™å…¥JavaScriptä»£ç ï¼Œä½œä¸ºVueå¯¹è±¡çš„åˆå§‹å€¼ã€‚ç„¶åç”±Vueå¯¹è±¡é€šè¿‡v-showåˆ¤æ–­æ˜¯å¦æ˜¾ç¤ºæ•°é‡æ ‡ç­¾ã€‚</p> <h6 id="_2-2-1-åœ¨htmlæ ‡ç­¾ä¸Šæ ‡è®°id"><a href="#_2-2-1-åœ¨htmlæ ‡ç­¾ä¸Šæ ‡è®°id" class="header-anchor">#</a> 2.2.1 åœ¨HTMLæ ‡ç­¾ä¸Šæ ‡è®°id</h6> <p>ç”±äºè¦è€ƒè™‘æ˜¯å¦ç™»å½•çš„æƒ…å†µï¼Œæ‰€ä»¥idåŠ åˆ°äº†ä¸¤ç§æƒ…å†µå¤–å±‚çš„div</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topBarApp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>w<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topbar-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>é€è‡³:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>åŒ—äº¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-ai-arrow-down<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topbar-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.user == null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserServlet?method=toLoginPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>login<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç™»å½•<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserServlet?method=toRegisterPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>register<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ³¨å†Œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>protected/CartServlet?method=showCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart iconfont icon-gouwuche<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>AdminServlet?method=toPortalPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åå°ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--          ç™»å½•åé£æ ¼--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>topbar-right<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.user != null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>æ¬¢è¿ä½ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${session.user.userName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å¼ æ€»<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>register<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ³¨é”€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>protected/CartServlet?method=showCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart iconfont icon-gouwuche<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            è´­ç‰©è½¦
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>totalCount &gt; 0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{totalCount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pages/manager/book_manager.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åå°ç®¡ç†<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h6 id="_2-2-2-åˆ›å»ºvueå¯¹è±¡"><a href="#_2-2-2-åˆ›å»ºvueå¯¹è±¡" class="header-anchor">#</a> 2.2.2 åˆ›å»ºVueå¯¹è±¡</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// topBarAppå¯¹è±¡çš„totalCountå±æ€§çš„åˆå§‹å€¼æ˜¯Thymeleafåœ¨æœåŠ¡å™¨ç«¯è¿ç®—å‡ºæ¥ç”¨è¡¨è¾¾å¼è®¾ç½®çš„</span>
<span class="token keyword">var</span> topBarApp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#topBarApp&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;totalCount&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>$<span class="token punctuation">{</span><span class="token punctuation">(</span>session<span class="token punctuation">.</span>cart <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token string">&quot;0&quot;</span><span class="token operator">:</span>session<span class="token punctuation">.</span>cart<span class="token punctuation">.</span>totalCount<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_2-3-å›¾ä¹¦åˆ—è¡¨divç»‘å®švueå¯¹è±¡"><a href="#_2-3-å›¾ä¹¦åˆ—è¡¨divç»‘å®švueå¯¹è±¡" class="header-anchor">#</a> 2.3 å›¾ä¹¦åˆ—è¡¨divç»‘å®šVueå¯¹è±¡</h5> <h6 id="_2-3-1-åœ¨htmlæ ‡ç­¾ä¸Šæ ‡è®°id"><a href="#_2-3-1-åœ¨htmlæ ‡ç­¾ä¸Šæ ‡è®°id" class="header-anchor">#</a> 2.3.1 åœ¨HTMLæ ‡ç­¾ä¸Šæ ‡è®°id</h6> <p>ç›®çš„æ˜¯ä¸ºäº†ä¾¿äºåˆ›å»ºVueå¯¹è±¡</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookListApp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-content<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${not #lists.isEmpty(bookList)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>book : ${bookList}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.imgPath}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/uploads/huozhe.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ä¹¦å:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.bookName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ´»ç€<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ä½œè€…:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.author}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä½™å<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ä»·æ ¼:ï¿¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>66.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>é”€é‡:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.sales}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>230<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>åº“å­˜:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.stock}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--&lt;button&gt;åŠ å…¥è´­ç‰©è½¦&lt;/button&gt;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/protected/CartServlet(method=addCart,bookId=${book.bookId})}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åŠ å…¥è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h6 id="_2-3-2-åœ¨é¦–é¡µå¼•å…¥vueå’Œaxiosåº“æ–‡ä»¶"><a href="#_2-3-2-åœ¨é¦–é¡µå¼•å…¥vueå’Œaxiosåº“æ–‡ä»¶" class="header-anchor">#</a> 2.3.2 åœ¨é¦–é¡µå¼•å…¥Vueå’Œaxiosåº“æ–‡ä»¶</h6> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/script/vue.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/script/axios.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h6 id="_2-3-3-åˆ›å»ºvueå¯¹è±¡"><a href="#_2-3-3-åˆ›å»ºvueå¯¹è±¡" class="header-anchor">#</a> 2.3.3 åˆ›å»ºVueå¯¹è±¡</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#bookListApp&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h6 id="_2-3-4-ç»‘å®šå•å‡»å“åº”å‡½æ•°"><a href="#_2-3-4-ç»‘å®šå•å‡»å“åº”å‡½æ•°" class="header-anchor">#</a> 2.3.4 ç»‘å®šå•å‡»å“åº”å‡½æ•°</h6> <p>ç»™åŠ å…¥è´­ç‰©è½¦æŒ‰é’®ç»‘å®šå•å‡»å“åº”å‡½æ•°</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addToCart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åŠ å…¥è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Vueä»£ç ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#bookListApp&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;addToCart&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="_2-3-5-å°†bookidè®¾ç½®åˆ°æŒ‰é’®ä¸­"><a href="#_2-3-5-å°†bookidè®¾ç½®åˆ°æŒ‰é’®ä¸­" class="header-anchor">#</a> 2.3.5 å°†bookIdè®¾ç½®åˆ°æŒ‰é’®ä¸­</h6> <p>ä¸ºäº†ä¾¿äºåœ¨æŒ‰é’®çš„å•å‡»å“åº”å‡½æ•°ä¸­å¾—åˆ°bookIdçš„å€¼</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">th:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${book.bookId}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addToCart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åŠ å…¥è´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h6 id="_2-3-6-åœ¨å•å‡»å“åº”å‡½æ•°ä¸­å‘é€ajaxè¯·æ±‚"><a href="#_2-3-6-åœ¨å•å‡»å“åº”å‡½æ•°ä¸­å‘é€ajaxè¯·æ±‚" class="header-anchor">#</a> 2.3.6 åœ¨å•å‡»å“åº”å‡½æ•°ä¸­å‘é€Ajaxè¯·æ±‚</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#bookListApp&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;addToCart&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// eventï¼šäº‹ä»¶å¯¹è±¡</span>
            <span class="token comment">// event.targetï¼šå½“å‰äº‹ä»¶æ“ä½œçš„å¯¹è±¡</span>
            <span class="token comment">// event.target.idï¼šå‰äº‹ä»¶æ“ä½œçš„å¯¹è±¡çš„idå±æ€§çš„å€¼</span>
            <span class="token keyword">var</span> bookId <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;protected/CartServlet&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;addCart&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;bookId&quot;</span><span class="token operator">:</span>bookId
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token keyword">var</span> result <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// ç»™å‡ºæç¤ºï¼šåŠ å…¥è´­ç‰©è½¦æˆåŠŸ</span>
                    layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">&quot;åŠ å…¥è´­ç‰©è½¦æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">// ä»å“åº”æ•°æ®ä¸­è·å–è´­ç‰©è½¦æ€»æ•°é‡</span>
                    <span class="token comment">// response.dataå…¶å®å°±æ˜¯AjaxCommonResultå¯¹è±¡çš„JSONæ ¼å¼</span>
                    <span class="token comment">// response.data.dataå°±æ˜¯è®¿é—®AjaxCommonResultå¯¹è±¡çš„dataå±æ€§</span>
                    <span class="token keyword">var</span> totalCount <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

                    <span class="token comment">// ä¿®æ”¹é¡µå¤´ä½ç½®è´­ç‰©è½¦çš„æ€»æ•°é‡</span>
                    topBarApp<span class="token punctuation">.</span>totalCount <span class="token operator">=</span> totalCount<span class="token punctuation">;</span>

                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>

                    <span class="token comment">// ç»™å‡ºæç¤ºï¼šresponse.data.message</span>
                    layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token punctuation">}</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="_2-4-åç«¯ä»£ç "><a href="#_2-4-åç«¯ä»£ç " class="header-anchor">#</a> 2.4 åç«¯ä»£ç </h5> <p>CartServlet</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">addCart</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.ä»è¯·æ±‚å‚æ•°ä¸­è·å–bookId</span>
    <span class="token class-name">String</span> bookId <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;bookId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.æ ¹æ®bookIdæŸ¥è¯¢å›¾ä¹¦æ•°æ®</span>
    <span class="token class-name">Book</span> book <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">getBookById</span><span class="token punctuation">(</span>bookId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.è·å–Sessionå¯¹è±¡</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4.å°è¯•ä»SessionåŸŸè·å–è´­ç‰©è½¦å¯¹è±¡</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 5.åˆ¤æ–­Cartå¯¹è±¡æ˜¯å¦å­˜åœ¨</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cart <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 6.å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°çš„Cartå¯¹è±¡</span>
        cart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 7.å°†æ–°åˆ›å»ºçš„Cartå¯¹è±¡å­˜å…¥SessionåŸŸ</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">,</span> cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 8.æ·»åŠ è´­ç‰©è½¦</span>
    cart<span class="token punctuation">.</span><span class="token function">addCartItem</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 9.ç»™Ajaxè¿”å›JSONæ ¼å¼å“åº”</span>
    <span class="token comment">// â‘ åˆ›å»ºAjaxCommonResultå¯¹è±¡</span>
    <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">AjaxCommonResult</span><span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> cart<span class="token punctuation">.</span><span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// â‘¡åˆ›å»ºGsonå¯¹è±¡</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// â‘¢å°†AjaxCommonResultå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// â‘£è®¾ç½®å“åº”ä½“çš„å†…å®¹ç±»å‹</span>
    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// â‘¤è¿”å›å“åº”</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="åŠŸèƒ½ä¸‰-æ˜¾ç¤ºè´­ç‰©è½¦æ•°æ®"><a href="#åŠŸèƒ½ä¸‰-æ˜¾ç¤ºè´­ç‰©è½¦æ•°æ®" class="header-anchor">#</a> åŠŸèƒ½ä¸‰ æ˜¾ç¤ºè´­ç‰©è½¦æ•°æ®</h3> <h4 id="_1ã€æ€è·¯-2"><a href="#_1ã€æ€è·¯-2" class="header-anchor">#</a> 1ã€æ€è·¯</h4> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg020.png" alt="images"></p> <h4 id="_2-ä»£ç å®ç°-2"><a href="#_2-ä»£ç å®ç°-2" class="header-anchor">#</a> 2. ä»£ç å®ç°</h4> <h5 id="_2-1-cartservletå¢åŠ getcartjson-æ–¹æ³•"><a href="#_2-1-cartservletå¢åŠ getcartjson-æ–¹æ³•" class="header-anchor">#</a> 2.1 CartServletå¢åŠ getCartJSON()æ–¹æ³•</h5> <h6 id="_2-1-1-cartæ¨¡å‹çš„å±€é™æ€§"><a href="#_2-1-1-cartæ¨¡å‹çš„å±€é™æ€§" class="header-anchor">#</a> 2.1.1 Cartæ¨¡å‹çš„å±€é™æ€§</h6> <p><img src="F:%5CJava_02%E9%98%B6%E6%AE%B5_web%5C%E6%95%B0%E6%8D%AE%E5%BA%93day01_mysql%E5%9F%BA%E7%A1%80&amp;%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5C%E9%A2%84%E4%B9%A0%E8%B5%84%E6%96%99%5CWEBday14_Ajax&amp;Axios&amp;%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%5C%E7%AC%94%E8%AE%B0%5Cimages%5Cimg021.png" alt="images"></p> <p>ç›®å‰çš„Cartå¯¹è±¡è½¬æ¢ä¸ºJSONåï¼Œæ²¡æœ‰totalCountã€totalAmountè¿™æ ·çš„å±æ€§ï¼ŒMapç»“æ„ä¹Ÿä¸å¦‚LIstéå†æ–¹ä¾¿ã€‚</p> <h6 id="_2-1-2-è°ƒæ•´æ–¹å¼"><a href="#_2-1-2-è°ƒæ•´æ–¹å¼" class="header-anchor">#</a> 2.1.2 è°ƒæ•´æ–¹å¼</h6> <p>æŠŠå‰ç«¯é¡µé¢éœ€è¦çš„å±æ€§ï¼Œå­˜å…¥Mapä¸­å³å¯ã€‚</p> <h6 id="_2-1-3-æ–¹æ³•ä»£ç "><a href="#_2-1-3-æ–¹æ³•ä»£ç " class="header-anchor">#</a> 2.1.3 æ–¹æ³•ä»£ç </h6> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">getCartJSON</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token comment">// 1.è·å–Sessionå¯¹è±¡</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.å°è¯•è·å–è´­ç‰©è½¦å¯¹è±¡</span>
    <span class="token class-name">Cart</span> cart <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Cart</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;cart&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.æ£€æŸ¥cartå¯¹è±¡æ˜¯å¦ä¸ºç©º</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cart <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">AjaxCommonResult</span><span class="token punctuation">.</span><span class="token constant">FAILED</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> cartJSONMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cartJSONMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;totalCount&quot;</span><span class="token punctuation">,</span> cart<span class="token punctuation">.</span><span class="token function">getTotalCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cartJSONMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;totalAmount&quot;</span><span class="token punctuation">,</span> cart<span class="token punctuation">.</span><span class="token function">getTotalAmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cartJSONMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;cartItemList&quot;</span><span class="token punctuation">,</span> cart<span class="token punctuation">.</span><span class="token function">getCartItemMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AjaxCommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">AjaxCommonResult</span><span class="token punctuation">.</span><span class="token constant">SUCCESS</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> cartJSONMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 4.å°†AjaxCommonResultå¯¹è±¡è½¬æ¢ä¸ºJSONä½œä¸ºå“åº”è¿”å›</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h5 id="_2-2-å‰ç«¯ä»£ç "><a href="#_2-2-å‰ç«¯ä»£ç " class="header-anchor">#</a> 2.2 å‰ç«¯ä»£ç </h5> <h6 id="_2-2-1-å»é™¤thymeleafç—•è¿¹"><a href="#_2-2-1-å»é™¤thymeleafç—•è¿¹" class="header-anchor">#</a> 2.2.1 å»é™¤Thymeleafç—•è¿¹</h6> <p>å°†cart.htmlé¡µé¢ä¸­ï¼Œç”±Thymeleafæ¸²æŸ“æ•°æ®çš„éƒ¨åˆ†å»æ‰ã€‚</p> <h6 id="_2-2-2-ä½¿ç”¨vueå¯¹è±¡åˆæ­¥æ¥ç®¡é¡µé¢æ¸²æŸ“"><a href="#_2-2-2-ä½¿ç”¨vueå¯¹è±¡åˆæ­¥æ¥ç®¡é¡µé¢æ¸²æŸ“" class="header-anchor">#</a> 2.2.2 ä½¿ç”¨Vueå¯¹è±¡åˆæ­¥æ¥ç®¡é¡µé¢æ¸²æŸ“</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#appCart&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;cart&quot;</span><span class="token operator">:</span><span class="token string">&quot;empty&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>HTMLæ ‡ç­¾ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart == 'empty'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è´­ç‰©è½¦è¿˜æ˜¯ç©ºç©ºçš„ï¼Œèµ¶ç´§å»æ·»åŠ å§ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h6 id="_2-2-3-åœ¨mountedç”Ÿå‘½å‘¨æœŸç¯å¢ƒå‘ajaxè¯·æ±‚"><a href="#_2-2-3-åœ¨mountedç”Ÿå‘½å‘¨æœŸç¯å¢ƒå‘ajaxè¯·æ±‚" class="header-anchor">#</a> 2.2.3 åœ¨mountedç”Ÿå‘½å‘¨æœŸç¯å¢ƒå‘Ajaxè¯·æ±‚</h6> <p>è®°å¾—åŠ å…¥axiosåº“ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static/script/axios.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> cartApp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#appCart&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;cart&quot;</span><span class="token operator">:</span><span class="token string">&quot;empty&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;mounted&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;protected/CartServlet&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;getCartJSON&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// 1.ä»å“åº”æ•°æ®ä¸­è·å–è¯·æ±‚å¤„ç†ç»“æœ</span>
            <span class="token keyword">var</span> result <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>

            <span class="token comment">// 2.æ£€æŸ¥ç»“æœæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token comment">// 3.è·å–è´­ç‰©è½¦æ•°æ®å¹¶èµ‹å€¼ç»™Vueå¯¹è±¡</span>
                cartApp<span class="token punctuation">.</span>cart <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cartApp<span class="token punctuation">.</span>cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    â€¦â€¦
</code></pre></div><h6 id="_2-2-4-å®Œæˆvueé¡µé¢æ¸²æŸ“"><a href="#_2-2-4-å®Œæˆvueé¡µé¢æ¸²æŸ“" class="header-anchor">#</a> 2.2.4 å®ŒæˆVueé¡µé¢æ¸²æŸ“</h6> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>appCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>w<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>å›¾ç‰‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>å•†å“åç§°<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>æ•°é‡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>å•ä»·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>é‡‘é¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>æ“ä½œ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart == 'empty'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è´­ç‰©è½¦è¿˜æ˜¯ç©ºç©ºçš„ï¼Œèµ¶ç´§å»æ·»åŠ å§ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart != 'empty'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItem in cart.cartItemList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItem.imgPath<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{cartItem.bookName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItem.bookId<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemDecrease<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemCountChange<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count-num<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cartItem.count<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemIncrease<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>count<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{cartItem.price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>{{cartItem.amount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>removeConfirm<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>protected/CartServlet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>åˆ é™¤<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clearCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>protected/CartServlet?method=clearCart<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>clear-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ¸…ç©ºè´­ç‰©è½¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ç»§ç»­è´­ç‰©<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>å…±<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{cart.totalCount}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>ä»¶å•†å“<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>total-price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>æ€»é‡‘é¢{{cart.totalAmount}}å…ƒ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pay<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>protected/OrderClientServlet?method=checkout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>å»ç»“è´¦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/zhengxinyu.github.io/blogs/1.html" class="prev">
          ç¬¬ä¸€ç¯‡
        </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#ç¬¬ä¸€ç« -ajax" class="sidebar-link reco-side-ç¬¬ä¸€ç« -ajax" data-v-b57cc07c>ç¬¬ä¸€ç«  Ajax</a></li><li class="level-3" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#_1-å­¦ä¹ ç›®æ ‡" class="sidebar-link reco-side-_1-å­¦ä¹ ç›®æ ‡" data-v-b57cc07c>1. å­¦ä¹ ç›®æ ‡</a></li><li class="level-3" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#_2-å†…å®¹è®²è§£" class="sidebar-link reco-side-_2-å†…å®¹è®²è§£" data-v-b57cc07c>2. å†…å®¹è®²è§£</a></li><li class="level-2" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#ç¬¬äºŒç« -axios" class="sidebar-link reco-side-ç¬¬äºŒç« -axios" data-v-b57cc07c>ç¬¬äºŒç«  Axios</a></li><li class="level-3" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#_1-å­¦ä¹ ç›®æ ‡-2" class="sidebar-link reco-side-_1-å­¦ä¹ ç›®æ ‡-2" data-v-b57cc07c>1. å­¦ä¹ ç›®æ ‡</a></li><li class="level-3" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#_2-å†…å®¹è®²è§£-2" class="sidebar-link reco-side-_2-å†…å®¹è®²è§£-2" data-v-b57cc07c>2. å†…å®¹è®²è§£</a></li><li class="level-2" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#ç¬¬ä¸‰ç« -ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ" class="sidebar-link reco-side-ç¬¬ä¸‰ç« -ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ" data-v-b57cc07c>ç¬¬ä¸‰ç«  ä¹¦åŸé¡¹ç›®ç¬¬å…­é˜¶æ®µ</a></li><li class="level-3" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#åŠŸèƒ½ä¸€-æ³¨å†Œé¡µé¢ç”¨æˆ·åå”¯ä¸€æ€§æ£€æŸ¥ä¼˜åŒ–" class="sidebar-link reco-side-åŠŸèƒ½ä¸€-æ³¨å†Œé¡µé¢ç”¨æˆ·åå”¯ä¸€æ€§æ£€æŸ¥ä¼˜åŒ–" data-v-b57cc07c>åŠŸèƒ½ä¸€ æ³¨å†Œé¡µé¢ç”¨æˆ·åå”¯ä¸€æ€§æ£€æŸ¥ä¼˜åŒ–</a></li><li class="level-3" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#åŠŸèƒ½äºŒ-åŠ å…¥è´­ç‰©è½¦" class="sidebar-link reco-side-åŠŸèƒ½äºŒ-åŠ å…¥è´­ç‰©è½¦" data-v-b57cc07c>åŠŸèƒ½äºŒ åŠ å…¥è´­ç‰©è½¦</a></li><li class="level-3" data-v-b57cc07c><a href="/zhengxinyu.github.io/blogs/2.html#åŠŸèƒ½ä¸‰-æ˜¾ç¤ºè´­ç‰©è½¦æ•°æ®" class="sidebar-link reco-side-åŠŸèƒ½ä¸‰-æ˜¾ç¤ºè´­ç‰©è½¦æ•°æ®" data-v-b57cc07c>åŠŸèƒ½ä¸‰ æ˜¾ç¤ºè´­ç‰©è½¦æ•°æ®</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:-1;" data-v-248d85d6></canvas></div><canvas id="vuepress-canvas-cursor"></canvas><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="https://assets.smallsunnyfox.com/music/2.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:20px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="https://assets.smallsunnyfox.com/music/3.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(https://assets.smallsunnyfox.com/music/3.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          æ’­æ”¾å¤±è´¥
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>ê°•ë‚¨ì—­ 4ë²ˆ ì¶œêµ¬</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>Plastic / Fallin` Dild</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/zhengxinyu.github.io/assets/js/app.2705a983.js" defer></script><script src="/zhengxinyu.github.io/assets/js/3.149f0cc6.js" defer></script><script src="/zhengxinyu.github.io/assets/js/1.516e925f.js" defer></script><script src="/zhengxinyu.github.io/assets/js/12.e8e63685.js" defer></script>
  </body>
</html>
